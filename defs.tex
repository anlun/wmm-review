%% math 

\newcommand{\set}[1]{\{{#1}\}}

%% program listings

\newcommand\kw[1]{\textsf{#1}~}

\newcommand{\readExpr }[2]{#2_{#1}}
\newcommand{\readInst }[3]{#2\;:=_{#1}\;#3}
\newcommand{\writeInst}[3]{#2\;:=_{#1}\;#3}

\newcommand{\declareArray}[3]{#1[#2..#3]}
\newcommand{\readArrayInst }[5]{#2\;:=_{#1}\;#3[#4..#5]}
\newcommand{\writeArrayInst}[5]{#2[#4..#5]\;:=_{#1}\;#3}

\newcommand{\fenceInst}[1]{\mathsf{fence}_{#1}}
\newcommand{\mfenceInst}{\mathsf{mfence}}

\newcommand{\casInst}[5]{#2 := #3.\mathsf{cas}_{#1}(#4, #5)}
\newcommand{\faddInst}[4]{#2 := #3.\mathsf{fadd}_{#1}(#4)}

\newcommand{\lockInst}[1]{\mathsf{lock}(#1)}
\newcommand{\unlockInst}[1]{\mathsf{unlock}(#1)}

\newcommand{\writeExclInst}[3]{\textup{\sf atomic-write}(#1, [#2], #3)}
\newcommand{\assignInst}[2]{#1\;:=\;#2}

\newcommand{\emptyInst}{~}
\newcommand{\epsInst}{\epsilon}
\newcommand{\seq}{;~}
\newcommand{\pll}{~||~}

\newcommand{\inarrC}[1]{\begin{array}{@{}c@{}}#1\end{array}}
\newcommand{\inpar}[1]{\left(\begin{array}{@{}l@{}}#1\end{array}\right)}
\newcommand{\inset}[1]{\left\{\begin{array}{@{}l@{}}#1\end{array}\right\}}
\newcommand{\inarr}[1]{\begin{array}{@{}l@{}}#1\end{array}}
\newcommand{\inarrII}[2]{\begin{array}{@{}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}\end{array}}
\newcommand{\inarrIII}[3]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}\end{array}}
\newcommand{\inarrIV}[4]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}&\inarr{#4}\end{array}}
\newcommand{\inarrV}[5]{\begin{array}{@{}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{~~}||@{~~}l@{}}\inarr{#1}&\inarr{#2}&\inarr{#3}&\inarr{#4}&\inarr{#5}\end{array}}

%% access modes

\newcommand{\na}{\mathtt{na}}
\newcommand{\rlx}{\mathtt{rlx}}
\newcommand{\opq}{\mathtt{opq}}
\newcommand{\rel}{{\mathtt{rel}}}
\newcommand{\acq}{{\mathtt{acq}}}
\newcommand{\acqrel}{{\mathtt{acqrel}}}
\newcommand{\sco}{{\mathtt{sc}}}

%% comments and notes

\newcommand{\comment}[1]{\color{teal}{~~\texttt{/\!\!/}\textit{#1}}}
\newcommand{\nocomment}[1]{\color{red!60!black}{~~\texttt{/\!\!/}\textit{#1}}}

\newcommand{\app}[1]{{\color{blue}\textbf{ANTON: #1}}}
\newcommand{\eupp}[1]{{\color{orange!70!black}\textbf{Evgenii: #1}}}
\newcommand{\todo}[1]{{\color{red!70!black}\textbf{TODO: #1}}}

%% abbrevations

\newcommand{\ie}{\emph{i.e.,} }
\newcommand{\eg}{\emph{e.g.,} }
\newcommand{\etc}{\emph{etc.} }
\newcommand{\sth}{\emph{s.t.} }
\newcommand{\etal}{\emph{et~al.} }
\newcommand{\wrt}{\emph{w.r.t.} }
\newcommand{\aka}{\emph{a.k.a.} }

\newcommand{\CAS}{\ensuremath{\mathsf{CAS}}\xspace}


\newcommand{\DRF}{\ensuremath{\mathsf{DRF}}\xspace}
\newcommand{\eDRF}{\ensuremath{\mathsf{eDRF}}\xspace}
\newcommand{\iDRF}{\ensuremath{\mathsf{iDRF}}\xspace}
\newcommand{\lDRF}{\ensuremath{\mathsf{lDRF}}\xspace}

%% programming languages

\newcommand{\Java}{Java\xspace}
\newcommand{\Kotlin}{Kotlin\xspace}
\newcommand{\JVM}{JVM\xspace}
\newcommand{\CPP}{C/C++\xspace}
\newcommand{\LLVM}{LLVM\xspace}
\newcommand{\OpenCL}{OpenCL\xspace}
\newcommand{\JS}{JavaScript\xspace}
\newcommand{\WASM}{WebAssembly\xspace}
\newcommand{\OCaml}{OCaml\xspace}
\newcommand{\MOCaml}{Multicore OCaml\xspace}
\newcommand{\Rust}{Rust\xspace}
\newcommand{\Haskell}{Haskell\xspace}
\newcommand{\Linux}{Linux\xspace}

%% memory models

\newcommand{\MM}[1]{\ensuremath{\mathsf{#1}}\xspace}

\newcommand{\SC}{\MM{SC}}
\newcommand{\EtESC}{\MM{EtE}-\MM{SC}}
\newcommand{\VbD}{\MM{VbD}}
\newcommand{\SCHs}{\MM{SC}-\MM{Hs}}
\newcommand{\DRFx}{\MM{DRFx}}

\newcommand{\TSO}{\MM{TSO}}
\newcommand{\PSO}{\MM{PSO}}
\newcommand{\BMM}{\MM{BMM}}
\newcommand{\RMMOA}{\MM{RMMOA}}

\newcommand{\Intel}{\MM{x86}}
\newcommand{\ARM}{\MM{ARM}}
\newcommand{\ARMv}[1]{\MM{ARMv{#1}}}
\newcommand{\POWER}{\MM{POWER}}

\newcommand{\CMM}{\MM{C11}}
\newcommand{\RCMM}{\MM{RC11}}
\newcommand{\ORCMM}{\MM{ORC11}}
\newcommand{\RAR}{\MM{RAR}}
\newcommand{\CRC}{\MM{CRC}}
\newcommand{\OCMM}{\MM{OCMM}}
\newcommand{\JAM}{\MM{JAM}}

\newcommand{\LKMM}{\MM{LKMM}}
\newcommand{\OHMM}{\MM{OHMM}}

\newcommand{\JMM}{\MM{JMM}}

\newcommand{\Promising}{\MM{Promising}}
\newcommand{\PRM}{\MM{PRM}}

\newcommand{\Weakestmo}{\MM{Weakestmo}}
\newcommand{\WMO}{\MM{WMO}}

\newcommand{\CSRA}{\MM{CSRA}}
\newcommand{\WJES}{\MM{WJES}}
\newcommand{\MRD}{\MM{MRD}}
\newcommand{\GOS}{\MM{GOS}}

\newcommand{\JSMM}{\MM{JSMM}}
\newcommand{\RMC}{\MM{RMC}}
\newcommand{\RAO}{\MM{RAO}}
\newcommand{\TSC}{\MM{TSC}}

%% for memory model classes in tables

\newcommand{\clsSC}{\makecell{Sequential\\Consistency}}
\newcommand{\clsTSO}{\makecell{Total/Partial\\Store Order}} 
\newcommand{\clsPO}{\makecell{Program Order\\Preserving}}
\newcommand{\clsSyDEP}{\makecell{Syntax. Dep.\\Preserving}}
\newcommand{\clsSemDEP}{\makecell{Semantic Dep.\\Preserving}}
\newcommand{\clsOOTA}{\makecell{Out of\\Thin-Air}} 

%% abbrevations for program transformations 

\newcommand{\TR}[1]{\ensuremath{\mathsf{#1}}\xspace}
\newcommand{\CSE}{\TR{CSE}}

%% benchmarks 

\newcommand{\SPECCPU}{\ensuremath{\mathsf{SPEC~CPU2006}}\xspace}

%% colors

\colorlet{colorPO}{gray!60!black}
\colorlet{colorRPO}{brown!60!black}
\colorlet{colorCF}{red!60!black}
\colorlet{colorECF}{red!60!black}
\colorlet{colorJF}{blue!60!black}
\colorlet{colorRF}{green!60!black}
\colorlet{colorEW}{brown}
\colorlet{colorMO}{orange}
\colorlet{colorFR}{purple}
\colorlet{colorECO}{orange!80!black}
\colorlet{colorSYN}{green!40!black}
\colorlet{colorHB}{blue}
\colorlet{colorPPO}{magenta}
\colorlet{colorPB}{olive}
\colorlet{colorSBRF}{olive}
\colorlet{colorRMW}{olive!70!black}
\colorlet{colorRS}{blue}
\colorlet{colorRELEASE}{blue!70!black}
\colorlet{colorSC}{violet}
\colorlet{colorPSC}{violet}
\colorlet{colorREL}{olive}
\colorlet{colorCONFLICT}{olive}
\colorlet{colorRACE}{olive}
\colorlet{colorWB}{orange!70!black}
\colorlet{colorSCB}{violet}
\colorlet{colorDETOUR}{teal}
\colorlet{colorDEPS}{violet}
\colorlet{colorFENCE}{olive}
\colorlet{colorCOV}{magenta!20}
\colorlet{colorISS}{blue!10!white}
\colorlet{colorVF}{purple!70!black}
\colorlet{colorXO}{violet!80!black}

\tikzset{
   every path/.style={>=stealth},
   po/.style={->,color=colorPO,shorten >=-0.5mm,shorten <=-0.5mm},
   rpo/.style={->,color=colorRPO,shorten >=-0.5mm,shorten <=-0.5mm},
   sw/.style={->,color=colorSYN,shorten >=-0.5mm,shorten <=-0.5mm},
   sc/.style={->,color=colorSC,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   rf/.style={->,color=colorRF,dashed,,shorten >=-0.5mm,shorten <=-0.5mm},
   hb/.style={->,color=colorHB,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   mo/.style={->,color=colorMO,dotted,very thick,shorten >=-0.5mm,shorten <=-0.5mm},
   co/.style={->,color=colorMO,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   no/.style={->,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   fr/.style={->,color=colorFR,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   deps/.style={->,color=colorDEPS,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   ppo/.style={->,color=colorPPO,shorten >=-0.5mm,shorten <=-0.5mm},
   rmw/.style={->,color=colorRMW,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   detour/.style={->,color=colorDETOUR,shorten >=-0.5mm,shorten <=-0.5mm},
   cf/.style={-,snake=zigzag,segment amplitude=1pt,segment length=3pt,colorCF},
   ew/.style={<->,dashed,,shorten >=-0.5mm,shorten <=-0.5mm,color=colorEW},
   jf/.style={->,color=colorJF,dotted,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   jo/.style={->,color=colorJO,thick,shorten >=-0.5mm,shorten <=-0.5mm},
   vf/.style={->,color=colorVF,dashed,shorten >=-0.5mm,shorten <=-0.5mm},
}

%% Orders

%\newcommand{\na}{\mathtt{na}}
\newcommand{\pln}{\mathtt{pln}}
\newcommand{\sto}{{\mathtt{st}}}
\newcommand{\full}{{\mathtt{sy}}}
\newcommand{\ld}{{\mathtt{ld}}}
\newcommand{\isb}{{\mathtt{isb}}}
\newcommand{\isync}{{\mathtt{isync}}}
\newcommand{\lwsync}{{\mathtt{lwsync}}}
\newcommand{\sync}{{\mathtt{sync}}}

\newcommand{\normal}{{\mathtt{normal}}}
\newcommand{\strong}{{\mathtt{strong}}}

\newcommand{\lPO}{{\color{colorPO}\mathtt{po}}}
\newcommand{\lPPO}{{\color{colorPPO}\mathtt{ppo}}}
\newcommand{\lPOimm}{{\color{colorPO}\mathtt{po_{imm}}}}
\newcommand{\lCF}{{\color{colorCF}\mathtt{cf}}}
\newcommand{\lCFimm}{{\color{colorCF}\mathtt{cf_{imm}}}}
\newcommand{\lECF}{{\color{colorECF}\mathtt{ecf}}}
\newcommand{\lJF}{{\color{colorJF} \mathtt{jf}}}
\newcommand{\lRF}{{\color{colorRF} \mathtt{rf}}}
\newcommand{\lPORF}{\lPO\lRF}
\newcommand{\lRPORF}{\lRPO\lRF}
\newcommand{\lRMW}{{\color{colorRMW} \mathtt{rmw}}}
\newcommand{\lMO}{{\color{colorMO} \mathtt{mo}}}
\newcommand{\lMOx}{{\color{colorMO} \mathtt{mo}}_x}
\newcommand{\lMOy}{{\color{colorMO} \mathtt{mo}}_y}
\newcommand{\lEW}{{\color{colorEW} \mathtt{ew}}}
\newcommand{\lCO}{{\color{colorMO} \mathtt{co}}}
\newcommand{\lCOx}{{\color{colorMO} \mathtt{co}}_x}
\newcommand{\lCOy}{{\color{colorMO} \mathtt{co}}_y}
\newcommand{\lFR}{{\color{colorFR} \mathtt{fr}}}
\newcommand{\lFRx}{{\color{colorFR} \mathtt{fr}}_x}
\newcommand{\lFRy}{{\color{colorFR} \mathtt{fr}}_y}
\newcommand{\lECO}{{\color{colorECO} \mathtt{eco}}}
\newcommand{\lSBRF}{{\color{colorSBRF} \mathtt{sbrf}}}
\newcommand{\lRS}{{\color{colorRS}\mathtt{rs}}}
\newcommand{\lRELEASE}{{\color{colorRELEASE}\mathtt{release}}}
\newcommand{\lSW}{{\color{colorSYN}\mathtt{sw}}}
\newcommand{\lHB}{{\color{colorHB}\mathtt{hb}}}
\newcommand{\lDOB}{{\mathtt{dob}}}
\newcommand{\lFWBOB}{{\mathtt{fwbob}}}
\newcommand{\lBOB}{{\mathtt{bob}}}
\newcommand{\lAOB}{{\mathtt{aob}}}
\newcommand{\lOBS}{{\mathtt{obs}}}
\newcommand{\lEORD}{{\mathtt{eord}}}
\newcommand{\lSC}{{\color{colorSC}\mathtt{sc}}}
\newcommand{\lXO}{{\color{colorXO}\mathtt{xo}}}

%% check-mark, cross-mark and other symbols used in the tables

\newcommand{\cmark}{$\mathbb{+}$}%{\text{\color{green!50!black}\ding{51}}}
\newcommand{\xmark}{$\mathbb{-}$}%{\text{\color{red!50!black}\ding{55}}}
\newcommand{\wmark}{$\mathbb{\pm}$}%{\text{\color{yellow!30!black}\ding{55}}}
\newcommand{\qmark}{$\mathbb{?}$}%{\text{\color{gray!50!black}\textbf{?}}}

\newcommand{\okcell}{\cmark}%{\cellcolor{green!20}\cmark}
\newcommand{\badcell}{\xmark}%{\cellcolor{red!10}\xmark}
\newcommand{\unkwcell}{\qmark}%{\cellcolor{gray!10}\qmark}
\newcommand{\warncell}{\wmark}%{\cellcolor{yellow!20}\wmark}
\newcommand{\nacell}{---}%{\cellcolor{green!20}---}

\newcommand{\ldrf}{\textsf{loc}}%{\cellcolor{green!20}\textsf{loc}}
\newcommand{\edrf}{\textsf{ext}}%{\cellcolor{green!10}\textsf{ext}}
\newcommand{\idrf}{\textsf{int}}%{\cellcolor{yellow!20}\textsf{int}}

\newcommand{\okcelln}[2]{\okcell}%{\cellcolor{green!20}\makecell{#1/#2}}
\newcommand{\badcelln}[2]{\badcell}%{\cellcolor{red!10}\makecell{#1/#2}}
\newcommand{\warncelln}[2]{\warncell}%{\cellcolor{yellow!20}\makecell{#1/#2}}

\newcommand{\ambgcelln}[2]{\makecell{#1}}


